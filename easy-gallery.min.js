"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var EasyGalleryPopup=function(){function t(e){_classCallCheck(this,t),this.gallery=e,this.selectedImage=0}return _createClass(t,[{key:"createPopup",value:function(){var e=this;if(!(0<this.gallery.context.getElementsByClassName("easy-gallery-popup").length)){var t=this.gallery.context.createElement("div");t.classList.add("easy-gallery-popup"),t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.right="0",t.style.bottom="0",t.style.opacity="0",t.style.backgroundColor="rgba( 0, 0, 0, 0.75 )",t.style.transitionDuration="1s",t.style.transitionProperty="opacity",this.gallery.context.body.appendChild(t),setTimeout(function(){t.style.opacity="1"},16);var i=this.gallery.context.createElement("div");i.classList.add("easy-gallery-popup-image"),i.style.position="absolute",i.style.top="3rem",i.style.left="0",i.style.right="0",i.style.bottom="3rem",t.appendChild(i);var l=this.gallery.context.createElement("div");l.innerHTML='<i class="fas fa-fw fa-times"></i>',l.style.position="absolute",l.style.top="0.5rem",l.style.right="0.5rem",l.style.color="#fff",l.style.cursor="pointer",l.style.opacity="0.4",l.style.transitionDuration=".2s",l.style.transitionProperty="opacity",l.style.fontSize="1.6rem",l.addEventListener("mouseenter",function(){this.style.opacity="1.0"}),l.addEventListener("mouseleave",function(){this.style.opacity="0.4"}),t.appendChild(l),l.addEventListener("click",function(){return e.closePopup()});var s=this.gallery.context.createElement("div");s.style.position="absolute",s.style.bottom="0.5rem",s.style.left="0",s.style.right="0",s.style.color="#fff",s.style.fontSize="1.6rem",t.appendChild(s);var n=this.gallery.context.createElement("div");n.style.marginLeft="auto",n.style.marginRight="auto",n.style.maxWidth="50rem",n.style.textAlign="center",s.appendChild(n);var a=this.gallery.context.createElement("div");a.innerHTML='<i class="fas fa-fw fa-chevron-left"></i>',a.style.display="inline-block",a.style.width="25%",a.style.color="#fff",a.style.cursor="pointer",a.style.opacity="0.4",a.style.transitionDuration=".2s",a.style.transitionProperty="opacity",a.style.fontSize="1.6rem",a.style.textAlign="center",a.addEventListener("mouseenter",function(){this.style.opacity="1.0"}),a.addEventListener("mouseleave",function(){this.style.opacity="0.4"}),n.appendChild(a),a.addEventListener("click",function(){return e.previousImage()});var o=this.gallery.context.createElement("div");o.innerHTML='<i class="fas fa-fw fa-chevron-right"></i>',o.style.display="inline-block",o.style.width="25%",o.style.color="#fff",o.style.cursor="pointer",o.style.opacity="0.4",o.style.transitionDuration=".2s",o.style.transitionProperty="opacity",o.style.fontSize="1.6rem",o.style.textAlign="center",o.addEventListener("mouseenter",function(){this.style.opacity="1.0"}),o.addEventListener("mouseleave",function(){this.style.opacity="0.4"}),n.appendChild(o),o.addEventListener("click",function(){return e.nextImage()})}}},{key:"closePopup",value:function(){if(0!==this.gallery.context.getElementsByClassName("easy-gallery-popup").length){var e=this.gallery.context.getElementsByClassName("easy-gallery-popup").item(0);e.style.opacity="0",setTimeout(function(){e.parentNode.removeChild(e)},1e3)}}},{key:"selectImageIndex",value:function(e){if(0!==this.gallery.context.getElementsByClassName("easy-gallery-popup").length){(e=parseInt(e))<0?e=0:e>=this.gallery.config.imageList.length&&(e=this.gallery.config.imageList.length-1),this.selectedImage=e;for(var t=!1,i=this.gallery.context.getElementsByClassName("easy-gallery-popup").item(0).getElementsByClassName("easy-gallery-popup-image").item(0),l=0;l<i.getElementsByClassName("image").length;l++)parseInt(i.getElementsByClassName("image").item(l).dataset.imageIndex)===e?(i.getElementsByClassName("image").item(l).style.opacity="1",t=!0):i.getElementsByClassName("image").item(l).style.opacity="0";if(!0!==t){var s=this.gallery.context.createElement("div");s.classList.add("image"),s.style.opacity=0,s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.right="0",s.style.bottom="0",s.style.backgroundRepeat="no-repeat",s.style.backgroundPosition="center center",s.style.backgroundSize="contain",s.style.transitionDuration="1s",s.style.transitionProperty="opacity",s.style.backgroundImage='url("'+this.gallery.config.imageList[e].src+'")',s.dataset.imageIndex=e,i.appendChild(s),setTimeout(function(){s.style.opacity="1"},16)}}}},{key:"previousImage",value:function(){var e=this.selectedImage-1;e<0&&(e=this.gallery.config.imageList.length-1),this.selectImageIndex(e)}},{key:"nextImage",value:function(){var e=this.selectedImage+1;e>=this.gallery.config.imageList.length&&(e=0),this.selectImageIndex(e)}},{key:"click",value:function(e){if(!1===e.classList.contains("easy-gallery-image"))for(;e!==document.body&&!1===e.classList.contains("easy-gallery-image");)e=e.parentNode;var t=e.dataset.imageIndex;this.createPopup(),this.selectImageIndex(parseInt(t))}}]),t}(),EasyGalleryRender=function(){function t(e){_classCallCheck(this,t),this.gallery=e,this.columns=0,this.init()}return _createClass(t,[{key:"init",value:function(){var e=this;void 0!==this.gallery&&!1!==this.gallery.context&&("object"===_typeof(this.gallery.config.targetElement)&&this.gallery.config.targetElement instanceof HTMLElement&&(this.gallery.config.targetElement.style.opacity=0,this.gallery.config.targetElement.style.transitionDuration="0s",this.gallery.config.targetElement.style.transitionProperty="opacity","undefined"!=typeof window&&window.addEventListener("resize",function(){return e.resize()})),this.preload().then(function(){return e.resize()}))}},{key:"preload",value:function(){var l=this;return new Promise(function(e,t){var s=[];l.gallery.config.imageList.forEach(function(e){var t,i,l;t=e.src,i=s,(l=new Image).onload=function(){i.push([t,l])},l.onerror=function(){i.push([t,null])},l.src=t});var i=setInterval(function(){s.length===l.gallery.config.imageList.length&&(clearInterval(i),e(s))},100)})}},{key:"resize",value:function(){if(void 0!==this.gallery&&!1!==this.gallery.context){var e=1,t=this.gallery.context.body;"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(t=window.innerWidth),t<=768?e=1:t<=1200?e=2:t<=1600?e=3:1600<t&&(e=4),"object"===_typeof(this.gallery.config.imageList)&&!0===Array.isArray(this.gallery.config.imageList)&&e>this.gallery.config.imageList.length&&(e=this.gallery.config.imageList.length),"number"==typeof this.gallery.config.maxColumns&&e>this.gallery.config.maxColumns&&(e=this.gallery.config.maxColumns),this.columns!==e&&(this.columns=e,this.draw())}}},{key:"calcColHeight",value:function(e){for(var t=0,i=e.childNodes,l=0;l<i.length;l++)t+=i[l].clientHeight;return t}},{key:"draw",value:function(){var e,t=this,i="col-12",l=0,s=0,n=0;2===this.columns?i="col-6":3===this.columns?i="col-4":4===this.columns&&(i="col-3"),this.gallery.config.targetElement.innerHTML="";var a=document.createElement("div");a.classList.add("row"),this.gallery.config.targetElement.appendChild(a);var o=[];for(l=0;l<this.columns;l++)o[l]=this.gallery.context.createElement("div"),o[l].classList.add(i),o[l].classList.add("p-0"),a.appendChild(o[l]);for(l=0;l<this.gallery.config.imageList.length;l++){for(n=0,s=1;s<o.length;s++)this.calcColHeight(o[s])<this.calcColHeight(o[n])&&(n=s);var r=this.gallery.context.createElement("div");r.classList.add("easy-gallery-image"),r.classList.add("my-2"),r.classList.add("mx-1"),r.style.minHeight="1rem",r.style.cursor="pointer",r.style.position="relative",r.style.verticalAlign="middle",r.style.textAlign="center",r.dataset.imageIndex=l,(e=this.gallery.context.createElement("img")).setAttribute("src",this.gallery.config.imageList[l].src),e.style.maxWidth="100%",r.appendChild(e),o[n].appendChild(r),r.addEventListener("click",function(e){return t.gallery.popup.click(e.target)});var y=this.gallery.context.createElement("div");y.classList.add("hover"),y.style.position="absolute",y.style.top="0",y.style.left="0",y.style.right="0",y.style.bottom="0",y.style.opacity="0",y.style.backgroundColor="rgba( 0, 0, 0, 0.75 )",y.style.color="#fff",y.innerHTML='<i style="position: absolute; display: inline-block; vertical-align: middle; font-size: 2rem; top: 50%; left: 50%; transform: translate( -50%, -50%);" class="fas fa-fw fa-search"></i>',r.append(y),r.addEventListener("mouseenter",function(){this.getElementsByClassName("hover").item(0).style.transitionDuration=".2s",this.getElementsByClassName("hover").item(0).style.opacity="1"}),r.addEventListener("mouseleave",function(){this.getElementsByClassName("hover").item(0).style.opacity="0"})}this.gallery.config.targetElement.style.transitionDuration=".5s",this.gallery.config.targetElement.style.opacity="1"}}]),t}(),EasyGallery=function(){function t(e){_classCallCheck(this,t),this.context=!1,"undefined"!=typeof document&&(this.context=document),this.config=e,this.render=new EasyGalleryRender(this),this.popup=new EasyGalleryPopup(this),this.init()}return _createClass(t,[{key:"init",value:function(){this.render.init()}}]),t}();